(()=>{"use strict";var t=function(){function t(){this.left=new e,this.right=new e,this.up=new e}return t.prototype.keyDownUp=function(t,e){var i="keydown"==t;switch(e){case"ArrowLeft":this.left.getInput(i);break;case"ArrowUp":this.up.getInput(i);break;case"ArrowRight":this.right.getInput(i)}},t}(),e=function(){function t(){this.active=this.down=!1}return t.prototype.getInput=function(t){this.down!=t&&(this.active=t),this.down=t},t}(),i=function(){function t(t){this.buffer=document.createElement("canvas").getContext("2d"),this.context=t.getContext("2d")}return t.prototype.drawRectangle=function(t,e,i,n,o){this.buffer.fillStyle=o,this.buffer.fillRect(Math.floor(t),Math.floor(e),i,n)},t.prototype.fill=function(t){this.buffer.fillStyle=t,this.buffer.fillRect(0,0,this.buffer.canvas.width,this.buffer.canvas.height)},t.prototype.render=function(){this.context.drawImage(this.buffer.canvas,0,0,this.buffer.canvas.width,this.buffer.canvas.height,0,0,this.context.canvas.width,this.context.canvas.height)},t.prototype.resize=function(t,e,i){e/t>i?(this.context.canvas.height=t*i,this.context.canvas.width=t):(this.context.canvas.height=e,this.context.canvas.width=e/i),this.context.imageSmoothingEnabled=!1},t}(),n=function(){function t(t,e,i){var n=this;this.accumulated_time=0,this.animation_frame_request=void 0,this.time=0,this.time_step=t,this.updated=!1,this.update=e,this.render=i,this.handleRun=function(t){n.run(t)}}return t.prototype.run=function(t){for(this.accumulated_time+=t-this.time,this.time=t,this.accumulated_time>=3*this.time_step&&(this.accumulated_time=this.time_step);this.accumulated_time>=this.time_step;)this.accumulated_time-=this.time_step,this.update(t),this.updated=!0;this.updated&&(this.updated=!1,this.render(t)),this.animation_frame_request=window.requestAnimationFrame(this.handleRun)},t.prototype.start=function(){this.accumulated_time=this.time_step,this.time=window.performance.now(),this.animation_frame_request=window.requestAnimationFrame(this.handleRun)},t.prototype.stop=function(){window.cancelAnimationFrame(this.animation_frame_request)},t}(),o=function(){function t(){this.world={background_color:"rgb(40, 48, 56)",friction:.8,old_flying_loader:0,player:new h,height:72,width:128,collideObject:function(t){t.x<0?(t.x=0,t.velocity_x=0):t.x+t.width>this.width&&(t.x=this.width-t.width,t.velocity_x=0),t.y<0?(t.y=0,t.velocity_y=0):t.y+t.height>this.height&&(t.flying=!1,t.y=this.height-t.height,t.velocity_y=0)},update:function(){this.player.velocity_x*=this.friction,this.player.update(),this.collideObject(this.player),console.log(this.player.velocity_y)}}}return t.prototype.update=function(){this.world.update()},t}(),h=function(){function t(){this.color="#ff0000",this.width=12,this.height=12,this.flying=!0,this.velocity_x=0,this.velocity_y=2,this.x=100,this.y=72,this.flying_loader=0}return t.prototype.fly=function(){this.flying=!0,this.flying_loader<1?this.flying_loader+=.04:this.velocity_y=-2},t.prototype.moveLeft=function(){this.velocity_x-=.5},t.prototype.moveRight=function(){this.velocity_x+=.5},t.prototype.update=function(){this.x+=this.velocity_x,this.y+=this.velocity_y},t}();window.addEventListener("load",(function(){var e=function(t){r.keyDownUp(t.type,t.code)},h=function(){s.resize(document.documentElement.clientWidth-32,document.documentElement.clientHeight-32,c.world.height/c.world.width),console.log(document.documentElement.clientWidth-32,document.documentElement.clientHeight-32),s.render()},r=new t,s=new i(document.querySelector("canvas")),c=new o,a=new n(1e3/30,(function(){s.fill(c.world.background_color),s.drawRectangle(c.world.player.x,c.world.player.y,c.world.player.width,c.world.player.height,c.world.player.color),s.render()}),(function(){r.left.active&&c.world.player.moveLeft(),r.right.active&&c.world.player.moveRight(),r.up.active&&c.world.player.fly(),c.update()}));s.buffer.canvas.height=c.world.height,s.buffer.canvas.width=c.world.width,window.addEventListener("keydown",e),window.addEventListener("keyup",e),window.addEventListener("resize",h),h(),a.start()}))})();